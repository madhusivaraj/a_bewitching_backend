<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="../static/styles.css">
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </head>
    <body>
        <div class="button-container">
            <div class="d-flex flex-row">
                <div class="button-row">
                    <button id="flickerbutton" onClick="flicker('flickerbutton')" onmousedown="this.style.background='#e21304'" onmouseup="this.style.background='#0FBF6D'" type="submit">FLICKER THE LIGHTS</button>
                    <button id="clownbutton" onclick="clown('clownbutton')" onmousedown="this.style.background='#e21304'" onmouseup="this.style.background='#0FBF6D'"  type="submit">DROP THE CLOWN</button>
                </div>
                <div class="button-row">
                    <button id="shutterbutton" onClick="blinds('shutterbutton')" onmousedown="this.style.background='#e21304'" onmouseup="this.style.background='#0FBF6D'" type="submit">SHUTTER THE BLINDS</button>
                    <button id="flashbutton" onClick="shadow('flashbutton')" onmousedown="this.style.background='#e21304'" onmouseup="this.style.background='#0FBF6D'" type="submit">FLASH SHADOW</button>
                </div>
                <div class="button-row">
                    <button id="fogbutton" onClick="fog('fogbutton')" onmousedown="this.style.background='#e21304'" onmouseup="this.style.background='#0FBF6D'" type="submit">FOG</button>
                    <button id="coffinbutton" onClick="coffin('coffinbutton')" onmousedown="this.style.background='#e21304'" onmouseup="this.style.background='#0FBF6D'" type="submit">OPEN THE COFFIN</button>
                </div>
                <div class="button-row">
                    <button id="dollbutton" onClick="doll('dollbutton')" onmousedown="this.style.background='#e21304'" onmouseup="this.style.background='#0FBF6D'" type="submit">TURN THE DOLL HEAD</button>
                    <button onclick="flicker()" type="submit">FLICKER THE LIGHTS</button>
                </div>
                <div class="button-row">
                    <button id="audiobutton" onClick="audio('audiobutton')" onmousedown="this.style.background='#e21304'" onmouseup="this.style.background='#0FBF6D'" type="submit">START MAIN AUDIO</button>
                    <button onclick="audio()" type="submit">XX MAIN AUDIO</button>
                </div>

                <div class="button-row">
                    <button onclick="flicker()" type="submit">FLICKER THE LIGHTS</button>
                    <button onclick="flicker()" type="submit">FLICKER THE LIGHTS</button>
                </div>
                <div class="button-row">
                    <button onclick="flicker()" type="submit">FLICKER THE LIGHTS</button>
                    <button onclick="flicker()" type="submit">FLICKER THE LIGHTS</button>
                </div>
                <div class="button-row">
                    <button onclick="flicker()" type="submit">FLICKER THE LIGHTS</button>
                    <button onclick="flicker()" type="submit">FLICKER THE LIGHTS</button>
                </div>
                <div class="button-row">
                    <button onclick="flicker()" type="submit">FLICKER THE LIGHTS</button>
                    <button onclick="flicker()" type="submit">FLICKER THE LIGHTS</button>
                </div>
            <div>
        </div>
    </body>
    <script type="text/javascript">
        var flickercount = 3;
        var clowncount = 1; // zipline
        var blindscount = 3;
        var shadowcount = 3;
        var fogcount = 3;
        var coffincount = 3;
        var dollcount = 3;
        var ids = ["flickerbutton", "clownbutton", "shutterbutton", "flashbutton", "fogbutton", "coffinbutton", "dollbutton"]
        //setTimeout(disableAll, 4000, ids);
        function flicker(btn){
            $.ajax({
                type: 'POST',
                url: '/flicker'
            });
            flickercount--;
            if(flickercount == 0){
                document.getElementById(btn).disabled = true;
                document.getElementById(btn).style.backgroundColor = "#b1bac9";
                return;
            } 
            document.getElementById(btn).disabled = true; // disable button when pressed for x seconds - setTimeout
            document.getElementById(btn).style.backgroundColor = "#b1bac9";
            setTimeout(setUp, 2000, btn); // enable button again
        }
        function clown(btn){
            $.ajax({
                type: 'POST',
                url: '/clown'
            });
            clowncount--;
            if(clowncount == 0){
                document.getElementById(btn).disabled = true;
                document.getElementById(btn).style.backgroundColor = "#b1bac9";
                return;
            } 
            document.getElementById(btn).disabled = true;
            document.getElementById(btn).style.backgroundColor = "#b1bac9";
            setTimeout(setUp, 2000, btn); 
        }
        function blinds(btn){
            $.ajax({
                type: 'POST',
                url: '/blinds'
            });
            blindscount--;
            if(blindscount == 0){
                document.getElementById(btn).disabled = true;
                document.getElementById(btn).style.backgroundColor = "#b1bac9";
                return;
            } 
            document.getElementById(btn).disabled = true;
            document.getElementById(btn).style.backgroundColor = "#b1bac9";
            setTimeout(setUp, 2000, btn); 
        }
        function shadow(btn){
            $.ajax({
                type: 'POST',
                url: '/shadow'
            });
            shadowcount--;
            if(shadowcount == 0){
                document.getElementById(btn).disabled = true;
                document.getElementById(btn).style.backgroundColor = "#b1bac9";
                return;
            } 
            document.getElementById(btn).disabled = true;
            document.getElementById(btn).style.backgroundColor = "#b1bac9";
            setTimeout(setUp, 2000, btn); 
        }
        function fog(btn){
            $.ajax({
                type: 'POST',
                url: '/fog'
            });
            fogcount--;
            if(fogcount == 0){
                document.getElementById(btn).disabled = true;
                document.getElementById(btn).style.backgroundColor = "#b1bac9";
                return;
            } 
            document.getElementById(btn).disabled = true;
            document.getElementById(btn).style.backgroundColor = "#b1bac9";
            setTimeout(setUp, 2000, btn); 
        }
        function coffin(btn){
            $.ajax({
                type: 'POST',
                url: '/coffin'
            });
            coffincount--;
            if(coffincount == 0){
                document.getElementById(btn).disabled = true;
                document.getElementById(btn).style.backgroundColor = "#b1bac9";
                return;
            } 
            document.getElementById(btn).disabled = true;
            document.getElementById(btn).style.backgroundColor = "#b1bac9";
            setTimeout(setUp, 2000, btn); 
        }
        function doll(btn){
            $.ajax({
                type: 'POST',
                url: '/doll'
            });
            dollcount--;
            if(dollcount == 0){
                document.getElementById(btn).disabled = true;
                document.getElementById(btn).style.backgroundColor = "#b1bac9";
                return;
            } 
            document.getElementById(btn).disabled = true;
            document.getElementById(btn).style.backgroundColor = "#b1bac9";
            setTimeout(setUp, 2000, btn); 
        }
        function setUp(btn){
            document.getElementById(btn).disabled = false;
            document.getElementById(btn).style.backgroundColor = "#0FBF6D";
        }
        function disableAll(ids){
            ids.forEach(disable);
        }
        function disable(btn){
            document.getElementById(btn).disabled = true;
            document.getElementById(btn).style.backgroundColor = "#b1bac9";
        }

    </script>
</html>
